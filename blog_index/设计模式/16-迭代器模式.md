# è¿­ä»£å™¨æ¨¡å¼

> ä½œè€…ï¼šç¬¬ä¸ƒäººæ ¼               
> é“¾æ¥ï¼šhttps://juejin.cn/post/7368308963127181312             
> æ¥æºï¼šç¨€åœŸæ˜é‡‘                  
> è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚                    

---------

âœ¨è¿™é‡Œæ˜¯ç¬¬ä¸ƒäººæ ¼çš„åšå®¢âœ¨å°ä¸ƒï¼Œæ¬¢è¿æ‚¨çš„åˆ°æ¥~âœ¨

ğŸ…ç³»åˆ—ä¸“æ ï¼šè®¾è®¡æ¨¡å¼ğŸ…

âœˆï¸æœ¬ç¯‡å†…å®¹: è¿­ä»£å™¨æ¨¡å¼âœˆï¸

ğŸ± æœ¬ç¯‡æ”¶å½•å®Œæ•´ä»£ç åœ°å€ï¼š[gitee.com/diqirenge/dâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdiqirenge%2Fdesign-pattern "https://gitee.com/diqirenge/design-pattern") ğŸ±

## æ¥”å­

å¾ˆä¹…æ²¡æœ‰æ›´æ–°æ–‡ç« äº†ï¼Œä¸€æ–¹é¢æ˜¯å·¥ä½œæ¯”è¾ƒå¿™ï¼Œå¦ä¸€æ–¹é¢å®¶é‡Œåˆè¿æ¥äº†æ–°çš„å°ç”Ÿå‘½ï¼ŒçŸ­æš‚ä¼‘æ•´ä¸€ä¸‹åï¼Œå°ä¸ƒåˆå†³å®šå‡ºæ¥å–è‰ºäº†ã€‚ä»Šå¤©æˆ‘ä»¬èŠä¸€ä¸‹è¿­ä»£å™¨æ¨¡å¼ã€‚

## éœ€æ±‚èƒŒæ™¯

å¾ˆå¤šå…¬å¸çš„ç»„ç»‡æ¶æ„éƒ½æ˜¯æ ‘å½¢ç»“æ„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªéƒ¨é—¨ï¼Œæ¯ä¸€ä¸ªéƒ¨é—¨åŒ…å«å¾ˆå¤šå‘˜å·¥ï¼Œç°åœ¨éœ€è¦éå†è¿™äº›å‘˜å·¥ï¼Œè€ƒè™‘ä½¿ç”¨æ ‘çš„æ·±åº¦éå†ã€‚

## åˆ†æè®¾è®¡

åœ¨å®ç°è¿­ä»£å™¨æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå‚è€ƒä¸‹ Java ä¸­ List ç±»æ˜¯å¦‚ä½•å®ç°è¿­ä»£å™¨çš„ï¼Œç±»å›¾å¦‚ä¸‹

![file](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf69ad9cffe140d8b6606f70662a878e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=802&h=668&s=15978&e=png&b=1e1f22)

å¼€å‘ä¼šæŒ‰ç…§è¿™ä¸ªæ¨¡å¼æ¥å®ç°ï¼Œè¿™ä¸ªæ¨¡å¼ä¸»è¦åˆ†ä¸ºä»¥ä¸‹â¼å—ï¼›

1. Collectionï¼Œé›†åˆâ½…æ³•éƒ¨åˆ†â½¤äºå¯¹â¾ƒå®šä¹‰çš„æ•°æ®ç»“æ„æ·»åŠ é€šâ½¤â½…æ³•ï¼› add ã€ remove ã€ iterator

ç­‰æ ¸â¼¼â½…æ³•ã€‚

2. Iterableï¼Œæä¾›è·å–è¿­ä»£å™¨ï¼Œè¿™ä¸ªæ¥â¼ç±»ä¼šè¢« Collection ç»§æ‰¿ã€‚

3. Iteratorï¼Œæä¾›äº†ä¸¤ä¸ªâ½…æ³•çš„å®šä¹‰ï¼› hasNext ã€ next ï¼Œä¼šåœ¨å…·ä½“çš„æ•°æ®ç»“æ„ä¸­å†™å®ç°â½…å¼ã€‚

## UMLå›¾

æ ¹æ®åˆ†æè®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”»ä¸€ä¸ªç®€å•çš„UMLå›¾ï¼Œåé¢é€šè¿‡UMLå›¾ç¼–ç 

![file](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a89f5c541819472a825d8d1e136f8c80~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=946&h=1066&s=99141&e=png&b=26272a)

## æ¨¡å—åç§°

iterator

## æ¨¡å—åœ°å€

[gitee.com/diqirenge/dâ€¦](https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdiqirenge%2Fdesign-pattern%2Ftree%2Fmaster%2Fsrc%2Fmain%2Fjava%2Fcom%2Frun2code%2Fdesign%2Fbehavioral%2Fiterator "https://gitee.com/diqirenge/design-pattern/tree/master/src/main/java/com/run2code/design/behavioral/iterator")

## æ¨¡å—æè¿°

è¿­ä»£å™¨æ¨¡å¼ä»£ç ç¤ºä¾‹

## ä»£ç å®ç°

1ã€å‚è€ƒjdkçš„Iteratorï¼Œç¼–å†™è¿­ä»£å™¨æ¥å£

â‘ ã€æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹

â‘¡ã€è·å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹

```java
 ä»£ç è§£è¯»/**
 * è¿­ä»£å™¨æ¥å£ï¼Œä¸»è¦æä¾›hasNextã€nextä¸¤ä¸ªæ–¹æ³•ï¼Œå‚è€ƒjdkçš„Iteratorè®¾è®¡
 * @see java.util.Iterator æ¥å£
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public interface Iterator<E> {

    boolean hasNext();

    E next();

}
```

2ã€å‚è€ƒjdkçš„Iterableï¼Œç¼–å†™Iterableï¼Œæä¾›ä¸€ä¸ªè·å–è¿­ä»£å™¨çš„æ–¹æ³•

```java
 ä»£ç è§£è¯»/**
 * æä¾›è·å–è¿­ä»£å™¨çš„æ–¹æ³•ï¼Œå‚è€ƒjdkçš„Iterableè®¾è®¡
 * @see java.lang.Iterable æ¥å£
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public interface Iterable<T> {

    Iterator<T> iterator();

}
```

3ã€å‚è€ƒjdkçš„Collectionï¼Œç¼–å†™é›†åˆæ¥å£

è¯¥æ¥å£ç»§æ‰¿Iterableï¼Œæ‹“å±•äº†åŸºç¡€çš„æ·»åŠ å’Œåˆ é™¤æ–¹æ³•

```java
 ä»£ç è§£è¯»/**
 * é›†åˆæ¥å£ï¼Œå‚è€ƒjdkçš„Collectionè®¾è®¡
 * @see java.util.Collection æ¥å£
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public interface Collection<E> extends Iterable<E> {

    boolean add(E e);

    boolean remove(E e);

    Iterator<E> iterator();

}
```

4ã€ç¼–å†™å‘˜å·¥ç±»

```java
 ä»£ç è§£è¯»/**
 * å‘˜å·¥ç±»
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public class Employee {
    private String name;
    private String position;

    public Employee(String name, String position) {
        this.name = name;
        this.position = position;
    }

    public String getName() {
        return name;
    }

    public String getPosition() {
        return position;
    }
}
```

5ã€ç¼–å†™ç»„ç»‡ç±»

å®ç°Iterableæ¥å£ï¼Œç¼–å†™iterator()æ–¹æ³•

```java
 ä»£ç è§£è¯»/**
 * ç»„ç»‡ç±»
 * å®ç°Iterableæ¥å£çš„iterator()æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªIteratorå®ä¾‹
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public class Organization implements Iterable<Employee> {
    private List<Employee> employees;

    public Organization() {
        employees = new ArrayList<>();
    }

    public void addEmployee(Employee employee) {
        employees.add(employee);
    }

    @Override
    public Iterator<Employee> iterator() {
        return new OrganizationIterator(employees);
    }

}
```

6ã€ç¼–å†™ç»„ç»‡å™¨è¿­ä»£ç±»

ä¸»è¦å®ŒæˆhasNextå’Œnextä¸¤ä¸ªæ–¹æ³•çš„é€»è¾‘ç¼–å†™

```java
 ä»£ç è§£è¯»/**
 * ç»„ç»‡è¿­ä»£å™¨ç±»
 * å®ç°Iteratorç±»ï¼Œç”¨äºéå†ç»„ç»‡ç»“æ„ä¸­çš„å‘˜å·¥ã€‚
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public class OrganizationIterator implements Iterator<Employee> {
    private List<Employee> employees;
    private int currentIndex;

    public OrganizationIterator(List<Employee> employees) {
        this.employees = employees;
        currentIndex = 0;
    }

    @Override
    public boolean hasNext() {
        return currentIndex < employees.size();
    }

    @Override
    public Employee next() {
        return employees.get(currentIndex++);
    }
}
```

7ã€ç¼–å†™æµ‹è¯•ç±»

```java
 ä»£ç è§£è¯»/**
 * æµ‹è¯•è¿­ä»£å™¨æ¨¡å¼
 * å…³æ³¨å…¬ä¼—å·ã€å¥”è·‘çš„ç ç•œã€‘ï¼Œä¸€èµ·è¿›æ­¥ä¸è¿·è·¯
 *
 * @author ç¬¬ä¸ƒäººæ ¼
 * @date 2024/01/30
 */
public class IteratorTest {

    @Test
    public void testIterator() {
        Organization organization = new Organization();
        organization.addEmployee(new Employee("å¼ ä¸‰", "ç»ç†"));
        organization.addEmployee(new Employee("æå››", "å·¥ç¨‹å¸ˆ"));
        organization.addEmployee(new Employee("ç‹äº”", "è®¾è®¡å¸ˆ"));

        Iterator<Employee> iterator = organization.iterator();

        while (iterator.hasNext()) {
            Employee employee = iterator.next();
            System.out.println("å§“åï¼š" + employee.getName() + "ï¼ŒèŒä½ï¼š" + employee.getPosition());
        }
    }
}
```

8ã€æµ‹è¯•ç»“æœ

> å§“åï¼šå¼ ä¸‰ï¼ŒèŒä½ï¼šç»ç†
>
> å§“åï¼šæå››ï¼ŒèŒä½ï¼šå·¥ç¨‹å¸ˆ
>
> å§“åï¼šç‹äº”ï¼ŒèŒä½ï¼šè®¾è®¡å¸ˆ

## å®ç°è¦ç‚¹

è¿­ä»£å™¨æ¨¡å¼å®ç°è¦ç‚¹å¦‚ä¸‹ï¼š

1. **æŠ½è±¡è¿­ä»£å™¨ï¼ˆIteratorï¼‰**ï¼šå®šä¹‰äº†éå†é›†åˆå¯¹è±¡æ‰€éœ€çš„æ¥å£ï¼Œé€šå¸¸åŒ…æ‹¬`hasNext()`å’Œ`next()`æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ä»¥åŠè·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚
2. **å…·ä½“è¿­ä»£å™¨ï¼ˆIteratorï¼‰**ï¼šå®ç°æŠ½è±¡è¿­ä»£å™¨æ¥å£çš„å…·ä½“ç±»ï¼Œè´Ÿè´£å…·ä½“çš„éå†é€»è¾‘ã€‚å®ƒä¿å­˜äº†å½“å‰éå†çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶å¯ä»¥æ ¹æ®éœ€è¦å‘å‰æˆ–å‘åéå†é›†åˆå…ƒç´ ã€‚
3. **èšåˆå¯¹è±¡ï¼ˆIterableï¼‰**ï¼šæ˜¯è¿­ä»£å™¨æ¨¡å¼çš„ç›®æ ‡å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªé›†åˆæˆ–å®¹å™¨ï¼ŒåŒ…å«äº†å¤šä¸ªå…ƒç´ ã€‚èšåˆå¯¹è±¡æä¾›åˆ›å»ºå…·ä½“è¿­ä»£å™¨çš„æ–¹æ³•ï¼Œä»¥ä¾¿å¤–éƒ¨å¯ä»¥é€šè¿‡è¿­ä»£å™¨è®¿é—®å…¶å†…éƒ¨çš„å…ƒç´ ã€‚
4. **éš”ç¦»é›†åˆçš„éå†å’Œå®ç°**ï¼šè¿­ä»£å™¨æ¨¡å¼å°†é›†åˆçš„éå†æ–¹å¼ä¸é›†åˆçš„å†…éƒ¨è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—å¯ä»¥åœ¨ä¸æš´éœ²é›†åˆå†…éƒ¨ç»“æ„çš„æƒ…å†µä¸‹è®¿é—®é›†åˆä¸­çš„å…ƒç´ ã€‚
5. **å¢åŠ éå†çš„çµæ´»æ€§**ï¼šé€šè¿‡è¿­ä»£å™¨æ¨¡å¼ï¼Œå¯ä»¥çµæ´»åœ°ä¸ºé›†åˆå¯¹è±¡å¢åŠ ä¸åŒçš„éå†æ–¹æ³•ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹é›†åˆå¯¹è±¡çš„ä»£ç ã€‚
6. **æ”¯æŒå¤šç§éå†æ–¹å¼**ï¼šè¿­ä»£å™¨æ¨¡å¼å…è®¸å®šä¹‰å¤šç§éå†æ–¹å¼ï¼Œä¾‹å¦‚é¡ºåºéå†ã€é€†åºéå†ç­‰ï¼Œåªéœ€è¦æä¾›ç›¸åº”çš„å…·ä½“è¿­ä»£å™¨å®ç°å³å¯ã€‚
7. **ç®€åŒ–å¤–éƒ¨æ“ä½œ**ï¼šå¤–éƒ¨ä»£ç åªéœ€é€šè¿‡è¿­ä»£å™¨çš„æ¥å£ä¸é›†åˆäº¤äº’ï¼Œæ— éœ€å…³å¿ƒé›†åˆçš„å†…éƒ¨ç»“æ„å’Œéå†ç»†èŠ‚ï¼Œç®€åŒ–äº†å¤–éƒ¨ä»£ç çš„å¤æ‚æ€§ã€‚

## æ€»ç»“

è¿­ä»£å™¨æ¨¡å¼éµå¾ªå¼€é—­åŸåˆ™ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚å½“éœ€è¦å¢åŠ æ–°çš„éå†æ–¹å¼æ—¶ï¼Œåªéœ€æ·»åŠ æ–°çš„å…·ä½“è¿­ä»£å™¨ç±»ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚æ¯ä¸ªç±»åªå…³æ³¨ä¸€é¡¹ä»»åŠ¡ï¼Œä¹Ÿç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚